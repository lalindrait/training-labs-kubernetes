


kubectl run mybusybox1 -it --rm --image busybox -- sh



kubeadm config images list


kubectl version --short
kubectl version -o yaml

#client version: version of the kubectl client installed on your local
#server version: version of the Kubernetes cluster itself that you are connected to



dnf list installed | grep -i kube


kubectl -n kube-system get cm kubeadm-config -o yaml



Upgraging the cluster - Patch Upgrade
======================================


kubeadm upgrade plan
kubeadm upgrade plan v1.27.2


Step 1 - Upgrade the master node
---------------------------------

Upgrade kubeadm on the Control Plane node
Drain the Control Plane node
Plan the upgrade - kubeadm upgrade plan
Apply the upgrade - kubeadm upgrade apply
Upgrade kubelet & kubectl on the control Plane node
Uncordon the Control Plane node




kubeadm upgrade plan
dnf upgrade -y kubeadm-1.25.11

kubeadm version
kubeadm version -o yaml

dnf list installed | grep  kubeadm
dnf info kubeadm



kubectl get nodes
kubectl drain kmaster-1 --ignore-daemonsets --delete-emptydir-data

kubectl get nodes
kubectl get pods -A -o wide  			# coredns will be moved to worker nodes


kubeadm upgrade plan v1.25.11
kubeadm upgrade apply v1.25.11

kubectl get nodes
kubectl get pods -A -o wide  			


kubectl uncordon kmaster-1
kubectl get nodes


kubectl version -o yaml
dnf upgrade -y kubelet-1.25.11  kubectl-1.25.11

systemctl daemon-reload
systemctl restart kubelet



kubectl run mybusybox2 -it --image busybox -- sh



Step 1 - Upgrade the worker node
---------------------------------

Drain the node
Upgrade kubeadm on the node
Upgrade the kubelet configuration (kubeadm upgrade node)
Upgrade kubelet & kubectl
Uncordon the node






dnf upgrade -y kubelet-1.25.11  kubectl-1.25.11
systemctl daemon-reload
systemctl restart kubelet








