
5.1 - ConfigMaps
---------------------------------



### lv-app-config.yml

kind: ConfigMap
apiVersion: v1
metadata:
  name: lv-nginx-config
data:  
  env: dev
  port: "32000"
  log-size: 512M




### cm-nginx-env-pod.yml


kind: Pod
apiVersion: v1
metadata:
  name: cm-nginx
  labels:
    app: nginx
spec:
  containers:
  - name: cmnginx
    image: nginx:latest
    ports:
    - containerPort: 8080
    env:
    - name: env
      valueFrom:
        configMapKeyRef:
          name: lv-nginx-config
          key: env
    - name: port
      valueFrom:
        configMapKeyRef:
          name: lv-nginx-config
          key: port
    - name: log-size
      valueFrom:
        configMapKeyRef:
          name: lv-nginx-config
          key: log-size






kubectl create -f lv-app-config.yml

kubectl get cm
kubectl describe cm lv-nginx-config

kubectl create -f cm-nginx-pod.yml
kubectl exec -it pod/cm-nginx -- bash

### From inside the Pod
env







### cm-nginx-file-pod.yml


kind: Pod
apiVersion: v1
metadata:
  name: cm-nginx
  labels:
    app: nginx
spec:
  containers:
  - name: cmnginx
    image: nginx:latest
    ports:
    - containerPort: 8080
    volumeMounts:
    - name: config-vol
      mountPath: /etc/lvconfigs
  nodeSelector:
    disktype: local
  volumes:
  - name: config-vol
    configMap:
      name: lv-nginx-config




kubectl create -f lv-app-config.yml
kubectl create -f cm-nginx-pod.yml
kubectl exec -it pod/cm-nginx -- bash
### From inside the Pod
cd /etc/lvconfigs/
ls
cat port




kubectl edit cm lv-nginx-config


kubectl exec -it pod/cm-nginx -- bash
### From inside the Pod
cd /etc/lvconfigs/
ls
cat port






